<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gialoma Life Solutions - Technology that frees up your time</title>
    <meta name="description" content="Gialoma Life Solutions provides innovative technology solutions that streamline operations and free up your valuable time." />
    <meta name="author" content="Gialoma Life Solutions" />

    <!-- =============================================== -->
    <!-- COMPLETE FAVICON SETUP FOR ALL PLATFORMS       -->
    <!-- =============================================== -->
    
    <!-- Standard Favicon - Google Search prioritizes these with WHITE backgrounds -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    
    <!-- PNG Favicons with WHITE backgrounds for High-DPI Displays and Google Search -->
    <link rel="icon" type="image/png" sizes="16x16" href="/lovable-uploads/343583a0-8e78-48c8-b312-d3568921f379.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png" />
    <link rel="icon" type="image/png" sizes="48x48" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png" />
    
    <!-- Google Search also looks for these common sizes -->
    <link rel="icon" type="image/png" sizes="96x96" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png" />
    
    <!-- Apple Touch Icons for iOS/iPadOS with WHITE backgrounds -->
    <link rel="apple-touch-icon" sizes="57x57" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png?v=2025" />
    <link rel="apple-touch-icon" sizes="60x60" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png?v=2025" />
    <link rel="apple-touch-icon" sizes="72x72" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png?v=2025" />
    <link rel="apple-touch-icon" sizes="76x76" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png?v=2025" />
    <link rel="apple-touch-icon" sizes="114x114" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png?v=2025" />
    <link rel="apple-touch-icon" sizes="120x120" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png?v=2025" />
    <link rel="apple-touch-icon" sizes="144x144" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png?v=2025" />
    <link rel="apple-touch-icon" sizes="152x152" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png?v=2025" />
    <link rel="apple-touch-icon" sizes="180x180" href="/lovable-uploads/3eb6ac48-0d9c-4ff4-91aa-6cc968f1249a.png?v=2025" />
    
    <!-- Default Apple Touch Icon without size specification for better iOS compatibility -->
    <link rel="apple-touch-icon" href="/lovable-uploads/3eb6ac48-0d9c-4ff4-91aa-6cc968f1249a.png?v=2025" />
    
    <!-- Android/Chrome Icons with WHITE backgrounds -->
    <link rel="icon" type="image/png" sizes="192x192" href="/lovable-uploads/3eb6ac48-0d9c-4ff4-91aa-6cc968f1249a.png" />
    <link rel="icon" type="image/png" sizes="384x384" href="/lovable-uploads/3eb6ac48-0d9c-4ff4-91aa-6cc968f1249a.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/lovable-uploads/66798576-8cf5-4019-a3bd-9f7a047bb1b3.png" />
    
    <!-- Safari Pinned Tab - Using clean Gialoma G logo -->
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#c7ae6a" />
    
    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileImage" content="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png" />
    <meta name="msapplication-TileColor" content="#c7ae6a" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="/site.webmanifest" />
    
    <!-- Theme Colors -->
    <meta name="theme-color" content="#c7ae6a" />
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#c7ae6a" />
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#b99a45" />
    
    <!-- Apple-specific Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Gialoma" />
    
    <!-- Windows Metro Tile -->
    <meta name="application-name" content="Gialoma Life Solutions" />
    
    <!-- Preload Critical Icons -->
    <link rel="preload" href="/lovable-uploads/6471ad21-2a7e-45d8-8bf0-2585088dfe20.png" as="image" type="image/png" />
    <link rel="preload" href="/lovable-uploads/3eb6ac48-0d9c-4ff4-91aa-6cc968f1249a.png" as="image" type="image/png" />

    <!-- Social Media Meta Tags -->
    <meta property="og:title" content="Gialoma Life Solutions - Technology that frees up your time" />
    <meta property="og:description" content="Innovative technology solutions that streamline operations and free up your valuable time." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@gialomalife" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <!-- Dynamic Language Detection Script -->
    <script>
      // Dynamic language detection and HTML lang attribute update
      (function() {
        function getLanguageFromPath() {
          const path = window.location.pathname;
          if (path.startsWith('/en') || path === '/english' || path === '/book' || path === '/login' || path === '/digitalization') {
            return 'en';
          }
          return 'es'; // Default to Spanish
        }
        
        // Update HTML lang attribute based on route
        const detectedLang = getLanguageFromPath();
        document.documentElement.lang = detectedLang;
        
        // Update document title based on language
        if (detectedLang === 'es') {
          document.title = 'Gialoma Life Solutions - Tecnolog√≠a que libera tu tiempo';
          // Update description meta tag
          const metaDescription = document.querySelector('meta[name="description"]');
          if (metaDescription) {
            metaDescription.setAttribute('content', 'Gialoma Life Solutions ofrece soluciones tecnol√≥gicas innovadoras que optimizan operaciones y liberan tu valioso tiempo.');
          }
        }
      })();
    </script>

    <!-- =============================================== -->
    <!-- GOOGLE CONSENT MODE V2 - REGIONAL CONFIGURATION -->
    <!-- =============================================== -->
    <script>
      // Initialize dataLayer BEFORE GTM loads
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      
      // European Economic Area (EEA) countries - require explicit consent
      const EEA_COUNTRIES = ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IS', 'IE', 'IT', 'LV', 'LI', 'LT', 'LU', 'MT', 'NL', 'NO', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE'];
      
      // Function to detect user's region (simplified - in production use a proper geolocation service)
      function getUserRegion() {
        // Try to get from browser language first
        const browserLang = navigator.language || navigator.languages[0];
        const countryCode = browserLang.split('-')[1]?.toUpperCase();
        
        // For Spanish users, likely from Spain or Latin America
        if (browserLang.startsWith('es')) {
          return countryCode || 'ES';
        }
        
        // For Italian users
        if (browserLang.startsWith('it')) {
          return 'IT';
        }
        
        // Default fallback
        return countryCode || 'US';
      }
      
      // Check if user is from EEA
      function isEEAUser() {
        const userRegion = getUserRegion();
        return EEA_COUNTRIES.includes(userRegion);
      }
      
      // Set consent defaults based on region
      if (isEEAUser()) {
        // EEA users: Require explicit consent (stricter GDPR compliance)
        gtag('consent', 'default', {
          'ad_storage': 'denied',
          'ad_user_data': 'denied',
          'ad_personalization': 'denied',
          'analytics_storage': 'denied',
          'functionality_storage': 'denied',
          'personalization_storage': 'denied',
          'security_storage': 'granted',
          'wait_for_update': 500,
          'region': EEA_COUNTRIES
        });
        
        console.log('üá™üá∫ EEA user detected - Explicit consent required');
        
        // Push to dataLayer for GTM
        window.dataLayer.push({
          'event': 'consent_default_eea',
          'consent_ad_storage': 'denied',
          'consent_ad_user_data': 'denied', 
          'consent_ad_personalization': 'denied',
          'consent_analytics_storage': 'denied',
          'user_region': 'EEA'
        });
        
      } else {
        // Non-EEA users: More permissive defaults (but still respecting user choice)
        gtag('consent', 'default', {
          'ad_storage': 'granted',
          'ad_user_data': 'granted',
          'ad_personalization': 'granted',
          'analytics_storage': 'granted',
          'functionality_storage': 'granted',
          'personalization_storage': 'granted',
          'security_storage': 'granted'
        });
        
        console.log('üåç Non-EEA user detected - Default consent granted');
        
        // Push to dataLayer for GTM
        window.dataLayer.push({
          'event': 'consent_default_non_eea',
          'consent_ad_storage': 'granted',
          'consent_ad_user_data': 'granted',
          'consent_ad_personalization': 'granted', 
          'consent_analytics_storage': 'granted',
          'user_region': 'non-EEA'
        });
      }

      // Enable URL passthrough for better measurement when storage is denied
      gtag('set', 'url_passthrough', true);
      
      // Enable ads data redaction when ad_storage is denied
      gtag('set', 'ads_data_redaction', true);
    </script>

    <!-- =============================================== -->
    <!-- GOOGLE TAG MANAGER - HEAD SECTION             -->
    <!-- =============================================== -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NFSGV2LS');</script>
    <!-- End Google Tag Manager -->

    <!-- =============================================== -->
    <!-- GOOGLE ANALYTICS 4 & CONSENT FUNCTIONS        -->
    <!-- =============================================== -->
    <script>
      // Check for existing cookie consent before loading GA4
      function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for(let i = 0; i < ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) === ' ') c = c.substring(1, c.length);
          if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
      }

      // Global consent update functions for cookie banner integration
      window.gtagConsent = {
        // Grant all consents (when user accepts all cookies)
        grantAll: function() {
          gtag('consent', 'update', {
            'ad_storage': 'granted',
            'ad_user_data': 'granted',
            'ad_personalization': 'granted',
            'analytics_storage': 'granted',
            'functionality_storage': 'granted',
            'personalization_storage': 'granted'
          });
          
          // Push consent update to dataLayer for GTM
          window.dataLayer.push({
            'event': 'consent_update_all',
            'consent_ad_storage': 'granted',
            'consent_ad_user_data': 'granted',
            'consent_ad_personalization': 'granted', 
            'consent_analytics_storage': 'granted',
            'user_action': 'accept_all'
          });
          
          console.log('‚úÖ All Google consents granted');
        },
        
        // Grant only analytics consent (when user accepts only necessary + analytics)
        grantAnalytics: function() {
          gtag('consent', 'update', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'granted',
            'functionality_storage': 'granted',
            'personalization_storage': 'denied'
          });
          
          // Push consent update to dataLayer for GTM
          window.dataLayer.push({
            'event': 'consent_update_analytics',
            'consent_ad_storage': 'denied',
            'consent_ad_user_data': 'denied',
            'consent_ad_personalization': 'denied',
            'consent_analytics_storage': 'granted',
            'user_action': 'accept_analytics_only'
          });
          
          console.log('‚úÖ Analytics consent granted, ads denied');
        },
        
        // Deny all except necessary (when user rejects all optional cookies)
        denyAll: function() {
          gtag('consent', 'update', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied',
            'functionality_storage': 'denied',
            'personalization_storage': 'denied'
          });
          
          // Push consent update to dataLayer for GTM
          window.dataLayer.push({
            'event': 'consent_update_denied',
            'consent_ad_storage': 'denied',
            'consent_ad_user_data': 'denied',
            'consent_ad_personalization': 'denied',
            'consent_analytics_storage': 'denied',
            'user_action': 'reject_all'
          });
          
          console.log('‚ùå All optional consents denied');
        },
        
        // Custom consent update (for granular control)
        update: function(consentObj) {
          gtag('consent', 'update', consentObj);
          
          // Push custom consent update to dataLayer for GTM
          window.dataLayer.push({
            'event': 'consent_update_custom',
            'consent_ad_storage': consentObj.ad_storage || 'denied',
            'consent_ad_user_data': consentObj.ad_user_data || 'denied',
            'consent_ad_personalization': consentObj.ad_personalization || 'denied',
            'consent_analytics_storage': consentObj.analytics_storage || 'denied',
            'user_action': 'custom_selection'
          });
          
          console.log('üîÑ Custom consent updated:', consentObj);
        }
      };

      // Load GA4 if consent is already given OR if non-EEA user
      const consentCookie = getCookie('gialoma_cookie_consent');
      const shouldLoadGA4 = (!isEEAUser()) || (consentCookie && JSON.parse(consentCookie).analytics);
      
      if (shouldLoadGA4) {
        try {
          let consent = { analytics: true, marketing: false };
          
          if (consentCookie) {
            consent = JSON.parse(consentCookie);
          }
          
          if (!isEEAUser()) {
            // Non-EEA users: Load GA4 immediately with default consent
            console.log('üåç Loading GA4 for non-EEA user with default consent');
          } else if (consent.analytics) {
            // EEA users: Only load if they explicitly consented
            if (consent.marketing) {
              window.gtagConsent.grantAll();
            } else {
              window.gtagConsent.grantAnalytics();
            }
          }
          
          // Load Google Analytics 4
          (function() {
            const script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-G15VKZG5HH';
            document.head.appendChild(script);
            
            script.onload = function() {
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-G15VKZG5HH', {
                'anonymize_ip': true,
                'cookie_flags': 'SameSite=Secure',
                'allow_google_signals': consent.marketing || false,
                'allow_ad_personalization_signals': consent.marketing || false
              });
              console.log('üìä Google Analytics 4 loaded');
            };
          })();
          
        } catch (error) {
          console.error('‚ùå Error parsing cookie consent:', error);
        }
      }
    </script>
  </head>

  <body>
    <!-- =============================================== -->
    <!-- GOOGLE TAG MANAGER - BODY SECTION (NOSCRIPT)  -->
    <!-- =============================================== -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NFSGV2LS"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>